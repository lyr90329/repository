<?xml version="1.0" encoding="utf-8" ?>
<properties>
	<category name="businessEntityTable">
		<property name="saveOpr"
			value="insert into businessentity_{}(name,url,description,domain) values('{}','{}','{}','{}');" />
		<property name="deleteOpr"
			value="delete from businessentity_{} where url='{}';" />
		<property name="getOpr"
			value="select * from businessentity_{} where url='{}';" />
		<property name="getAllOpr"
			value="select * from businessentity_{};" />
		<property name="clearOpr"
			value="delete from businessentity_{};" />
		<property name="createMemOpr"
			value="create memory table businessentity_{}(id bigint GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) ,name varchar(100) not null,url varchar(200),description varchar(200),domain varchar(200),primary key(id));" />
		<property name="createFileOpr"
			value="create table businessentity_{}(id bigint not null auto_increment,name varchar(100) not null,url varchar(200),description varchar(200),domain varchar(200),primary key(id));" />
		<property name="dropOpr" value="drop table businessentity_{};" />
	</category>

	<category name="serviceTable">
		<property name="saveOpr"
			value="insert into services_{}(name,description,url,addition_info,wsdl_url,wsdl_path,businessId,userName,registerDate) values('{}','{}','{}','{}','{}','{}','{}','{}','{}');" />
		<property name="updateOpr"
			value="update services_{} set name='{}',description='{}',url='{}',addition_info='{}',wsdl_url='{}',wsdl_path='{}',businessId='{}',userName='{}',registerDate='{}' where id='{}';" />
		<property name="deleteOpr"
			value="delete from services_{} where wsdl_url='{}';" />
		<property name="deleteIgnoreJobOpr"
			value="delete from `services_-1` where wsdl_url='{}';" />

		<property name="getOpr"
			value="select * from services_{} where wsdl_url='{}';" />
		<property name="getByIdOpr"
			value="select * from services_{} where id='{}';" />
		<property name="getByNameOpr"
			value="select * from services_{} where name='{}';" />
		<property name="get_by_wsdlpath"
			value="select * from services_{} where wsdl_path='{}';" />

		<property name="getIgnoreJobOpr"
			value="select distinct name,description,url,addition_info,wsdl_url,wsdl_path,businessId,userName,registerDate from `services_-1` where wsdl_url='{}';" />
		<property name="getAllOpr" value="select * from services_{};" />
		<property name="getAllIgnoreJobOpr"
			value="select distinct name,description,url,addition_info,wsdl_url,wsdl_path,businessId,userName,registerDate from `services_-1`;" />

		<property name="clearOpr" value="delete from services_{};" />
		<property name="createMemOpr"
			value="create memory table services_{}(id bigint GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) , name varchar(100) not null,description varchar(200),url varchar(200) not null,addition_info varchar(200),wsdl_url varchar(100) not null,wsdl_path varchar(100) not null,businessId bigint not null,userName varchar(100),registerDate date not null ,primary key(id),foreign key(businessId) references BusinessEntity_{}(id) on delete cascade);" />
		<property name="createFileOpr"
			value="create table services_{}(id bigint not null auto_increment,name varchar(100) not null,description varchar(200),url varchar(200) not null,addition_info text,wsdl_url varchar(100) not null,wsdl_path varchar(100) not null,businessId bigint not null,userName varchar(100),registerDate date not null, primary key(id),foreign key(businessId) references BusinessEntity_{}(id) on delete cascade);" />

		<property name="getMinOpr"
			value="select * from services_{} where id=(select min(id) from services_{});" />
		<property name="getMaxOpr"
			value="select * from services_{} where id=(select max(id) from services_{});" />

		<property name="dropOpr" value="drop table services_{};" />
	</category>

	<category name="jarTable">
		<property name="saveOpr"
			value="insert into jars_{}(name,path,url,description,version,projectId) values('{}','{}','{}','{}','{}','{}');" />
		<property name="deleteOpr"
			value="delete from jars_{} where url='{}';" />
		<property name="getOpr"
			value="select * from jars_{} where url='{}';" />
		<property name="getAllOpr" value="select * from jars_{};" />
		<property name="clearOpr" value="delete from jars_{};" />
		<property name="createMemOpr"
			value="create memory table jars_{}(id bigint GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) ,  name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);" />
		<property name="createFileOpr"
			value="create table jars_{}(id bigint not null auto_increment,name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);" />
		<property name="dropOpr" value="drop table jars_{};" />
	</category>

	<category name="javaTable">
		<property name="saveOpr"
			value="insert into javas_{}(name,path,url,description,version,projectId) values('{}','{}','{}','{}','{}','{}');" />
		<property name="deleteOpr"
			value="delete from javas_{} where url='{}';" />
		<property name="getOpr"
			value="select * from javas_{} where url='{}';" />
		<property name="getAllOpr" value="select * from javas_{};" />
		<property name="clearOpr" value="delete from javas_{};" />
		<property name="createMemOpr"
			value="create memory table javas_{}(id bigint GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) ,  name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);" />
		<property name="createFileOpr"
			value="create table javas_{}(id bigint not null auto_increment,name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);" />
		<property name="dropOpr" value="drop table javas_{};" />
	</category>

	<category name="classTable">
		<property name="saveOpr"
			value="insert into classes_{}(name,path,url,description,version,projectId) values('{}','{}','{}','{}','{}','{}');" />
		<property name="deleteOpr"
			value="delete from classes_{} where url='{}';" />
		<property name="getOpr"
			value="select * from classes_{} where url='{}';" />
		<property name="getAllOpr" value="select * from classes_{};" />
		<property name="clearOpr" value="delete from classes_{};" />
		<property name="createMemOpr"
			value="create memory table classes_{}(id bigint GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) ,  name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);" />
		<property name="createFileOpr"
			value="create table classes_{}(id bigint not null auto_increment,name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);" />
		<property name="dropOpr" value="drop table classes_{};" />
	</category>

	<category name="jobTable">
		<property name="saveOpr"
			value="insert into jobs values('{}','{}','{}','{}');" />
		<property name="deleteOpr"
			value="delete from jobs where id='{}';" />
		<property name="getOpr"
			value="select * from jobs where id='{}';" />
		<property name="getAllOpr" value="select * from jobs;" />
		<property name="clearOpr" value="delete from jobs;" />
		<property name="createMemOpr"
			value="create memory table jobs(id bigint,start_time datetime not null,end_time datetime not null,description varchar(200),primary key(id));" />
		<property name="dropOpr" value="drop table jobs;" />
		<property name="getMaxOpr"
			value="select * from jobs where id=(select max(id) from jobs);" />
	</category>

	<category name="projectTable">
		<property name="saveOpr"
			value="insert into projects_{}(name,url,description,owner) values('{}','{}','{}','{}');" />
		<property name="deleteOpr"
			value="delete from projects_{} where url='{}';" />
		<property name="getOpr"
			value="select * from projects_{} where url='{}';" />
		<property name="getAllOpr" value="select * from projects_{};" />
		<property name="clearOpr" value="delete from projects_{};" />
		<property name="createMemOpr"
			value="create memory table projects_{}(id bigint GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) ,name varchar(100) not null,url varchar(200),description varchar(200),owner varchar(200),primary key(id));" />
		<property name="createFileOpr"
			value="create table projects_{}(id bigint not null auto_increment,name varchar(100) not null,url varchar(200) not null,description varchar(200),owner varchar(200),primary key(id));" />
		<property name="dropOpr" value="drop table projects_{};" />
	</category>

	<category name="repositoryTable">
		<property name="createFileOpr"
			value="create table businessentity_{}(id bigint not null auto_increment,name varchar(100) not null,url varchar(200),description varchar(200),domain varchar(200),primary key(id));
		create table projects_{}(id bigint not null auto_increment,name varchar(100) not null,url varchar(200) not null,description varchar(200),owner varchar(200),primary key(id));
		create table services_{}(id bigint not null auto_increment,name varchar(100) not null,description varchar(200),url varchar(200) not null,addition_info text,wsdl_url varchar(100) not null,wsdl_path varchar(100) not null,businessId bigint not null,primary key(id),foreign key(businessId) references BusinessEntity_{}(id) on delete cascade);
		create table javas_{}(id bigint not null auto_increment,name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);
		create table jars_{}(id bigint not null auto_increment,name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);
		create table classes_{}(id bigint not null auto_increment,name varchar(100) not null,path varchar(100) not null,url varchar(200) not null,description varchar(200),version varchar(100),projectId bigint not null,primary key(id),foreign key(projectId) references Projects_{}(id) on delete cascade);" />
	</category>

	<category name="registryTable">
		<property name="createFileOpr"
			value="create table services_1(id bigint not null auto_increment,name varchar(100) not null,description varchar(200),url varchar(200) not null,addition_info text,wsdl_url varchar(100) not null,wsdl_path varchar(100) not null,businessId bigint not null,primary key(id),foreign key(businessId) references BusinessEntity_1(id) on delete cascade);" />
	</category>
	<category name="registryBusinessTable">
		<property name="createFileOpr"
			value="create table businessentity_1(id bigint not null auto_increment,name varchar(100) not null,url varchar(200),description varchar(200),domain varchar(200),primary key(id));" />
	</category>
	<!--added by zhujj , modified by nevor -->
	<category name="bpmnTable">
		<property name="saveOpr"
			value="insert into pr_bpmn (BpmnLocation,diagramLocation,flexLocation) values(?,?,?);" />
		<property name="getByNameOpr"
			value="select * from pr_bpmn where BPMNName='{}';" />
		<property name="getByIdOpr"
			value="select * from pr_bpmn where id=?;" />
		<property name="savebyflex"
			value="insert into pr_bpmn (BPMNLocation,BPMNName,BPMNContent,FlexContent) values('{}','{}',?,?);" />
		<property name="updateOpr"
			value="update pr_bpmn set bpmnLocation=?,diagramLocation=?,flexLocation=? where id=?;" />
		<property name="getContentOpr"
			value="select id,{} from pr_bpmn where id=?;" />
		<property name="updateContentOpr"
			value="update pr_bpmn set {}=?,{}=? where id=?;" />
	</category>
	<category name="graphTable">
		<property name="saveOpr"
			value="insert into graphmodel (BPMNID,Model) values('{}',?);" />
		<property name="getByIdOpr"
			value="select * from graphmodel where BPMNID='{}';" />
		<property name="getAllOpr" value="select * from graphmodel ;" />
	</category>
	<category name="anotationTable">
		<property name="saveOpr"
			value="update pr_Anotation set Description='{}',Domain='{}',CreationDate='{}',ModifyDate='{}',Author='{}' where bpmnid={};" />
		<property name="getbykey"
			value="select * from pr_BPMN, Anotation where description like '%{}%' and bpmnid=id" />
		<property name="getByIdOpr"
			value="select * from pr_BPMN where ID='{}';" />
		<property name="setDrive" value="call setDrive({},{})" />
	</category>
	<category name="correlativity">
		<property name="saveOpr"
			value="insert into pr_correlativity (model) values(?);" />
		<property name="getByNameOpr"
			value="select * from pr_correlativity where ID='{}';" />
		<property name="getByIdOpr"
			value="select * from pr_correlativity where ID={};" />
	</category>
	<!-- added by nevor -->
	<category name="domainTable">
		<property name="saveOpr"
			value="insert into pr_domain (description,createdTime,modifiedTime,name) values(?,?,?,?);" />
		<property name="getAllOpr" value="select * from pr_domain" />
		<property name="updateOpr"
			value="update pr_domain set description=?,createdTime=?,modifiedTime=?,name=? where id=?;" />
		<property name="getByIdOpr"
			value="select * from pr_domain where id=? ;" />
	</category>
	<category name="titleTable">
		<property name="saveOpr"
			value="insert into pr_title (title,versions,latest,domainId,description) values(?,?,?,?,?);" />
		<property name="getAllOpr" value="select * from pr_title" />
		<property name="updateOpr"
			value="update pr_title set title=?,versions=?,latest=?,domainId=?,description=? where id=?;" />
		<property name="getByIdOpr"
			value="select * from pr_title where id=?;" />
		<property name="updateVersionsOpr"
			value="update pr_title set versions=?,latest=? where id=?;" />
		<property name="searchOpr"
			value="select * from pr_title where match(title,description) against(? in boolean mode);" />
		<property name="getByTagIdOpr"
			value="select * from pr_title,pr_r_tag_title where tagId=? and pr_title.id=titleId;" />
	</category>
	<category name="metaTable">
		<property name="saveOpr"
			value="insert into pr_metadata(id,description,creationDate,modifyDate,author,version,derive,titleId) values(?,?,?,?,?,?,?,?)" />
		<property name="getLatestByTitleId"
			value="select * from pr_metadata,pr_title where pr_title.id=? and pr_metadata.titleId=pr_title.id and pr_title.latest=? and pr_title.latest=pr_metadata.version;" />
		<property name="getVersionByTitleId"
			value="select * from pr_metadata,pr_title where pr_title.id=? and pr_metadata.titleId=pr_title.id  and pr_metadata.version=?;" />
		<property name="getByIdOpr"
			value="select * from pr_metadata where id=?;" />
		<property name="updateOpr"
			value="update pr_metadata set description=?,creationDate=?,modifyDate=?,author=?,version=?,derive=?,titleId=? where id=?;" />
		<property name="getAllVersionsByTitleIdOpr"
			value="select * from pr_metadata where pr_metadata.titleId=?;" />
	</category>
	<category name="petriTable">
		<property name="saveOpr"
			value="insert into pr_petri(bpmnId,petri) values(?,?);" />
		<property name="getAllOpr" value="select * from pr_petri" />
		<property name="updateOpr"
			value="update pr_petri set bpmnId=?,petri=? where id=?;" />
		<property name="getByDomainId"
			value="select pr_petri.* from pr_petri,pr_title,pr_metadata where pr_title.domainId=? and pr_metadata.titleId = pr_title.id and pr_metadata.version=pr_title.latest and pr_petri.bpmnId=pr_metadata.id;" />
	</category>
	<category name="tagTable">
		<property name="saveOpr"
			value="insert into pr_tag(tag) values(?);" />
		<property name="getByTitleIdOpr"
			value="select * from pr_tag,pr_r_tag_title where pr_tag.id=pr_r_tag_title.tagId and pr_r_tag_title.titleId=?;" />
	</category>
	<!-- To be userd by every table -->
	<category name="commonTable">
		<property name="getByPropertyOpr"
			value="select * from {} where {}=?;" />
		<property name="removeByPropertyOpr"
			value="delete from {} where {}=?;" />
		<property name="updateByPropertyOpr"
			value="update {} set {}=? where {}=?;" />
		<property name="getAllOpr"
			value="select * from {};" />
	</category>

	<category name="multiTable">
		<property name="getByDomainId"
			value="select * from pr_title,pr_bpmn,pr_metadata where pr_title.domainId=? and pr_metadata.titleId=pr_title.id and pr_bpmn.id=pr_metadata.bpmnId and pr_title.latest=pr_metadata.version;" />
		<property name="updateOpr"
			value="update pr_metadata set description=?,creationDate=?,modifyDate=?,author=?,version=?,derive=?,titleId=? where id=?;" />
		<property name="getByIdOpr"
			value="select * from pr_metadata where id=?;" />
	</category>
	
	<category name="relationTable">
		<property name="removeByTwoPropertyOpr"
			value="delete from {} where {}=? and {}=?;" />
	</category>
	
	<category name="userTable">
		<property name="saveOpr" value="insert into user(name,pwd) value(?,?);" />
	</category>
	
	<category name="annotationTable">
		<property name="saveOpr" value="CALL pr_fn_saveAnnotation(?,?,?,?,?);" />
		<property name="getByBpmnIdAndElementIdOpr"
			value="select * from pr_annotation,pr_r_bpmn_element_annotation where annotationId=id and bpmnId=? and elementId=?;" />
	</category>
	<!-- end of nevor's addition  -->
</properties>

